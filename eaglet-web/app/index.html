<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="../bower_components/angular/angular.min.js"></script>
    <script src="../bower_components/angular-upload/angular-upload.min.js"></script>

    <script src="app.js"></script>
    <script src="controller/validatorCtrl.js"></script>
    <script src="services/restService.js"></script>

    <link href="../bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/overwrite.css" rel="stylesheet">
</head>
<body ng-app="eaglet-app">
<div class="page-header">
    <h1>Eaglet Validator</h1>
</div>
<div class="container" ng-controller="validatorCtrl">
    <ul class="nav nav-tabs">
        <li ng-class="(tab == 'directInput') ? 'active' : ''" ng-click="tab = 'directInput'" data-toggle="tab"><a><span
                class="glyphicon glyphicon-pencil"
                aria-hidden="true"></span> Direct Input</a></li>
        <li ng-class="(tab == 'fileUpload') ? 'active' : ''" ng-click="tab = 'fileUpload'" data-toggle="tab"><a><span
                class="glyphicon glyphicon-open"
                aria-hidden="true"></span> File Upload</a></li>
    </ul>
    <div class="well">
        <form>
            <div class="form-group">
                <div ng-show="tab === 'directInput'">
                    <textarea class="form-control directTextArea"
                              rows="15"
                              ng-model="directInput"
                              required
                              novalidate></textarea>
                    <div class="btn-group btn-group-xs pull-right buttons" role="group">
                        <!-- <button type="submit" class="btn btn-danger">Delete</button> -->
                        <button ng-click="postDirectInput(directInput)" type="submit" class="btn btn-primary right">
                            Submit
                        </button>
                    </div>
                </div>

                <div ng-show="tab === 'fileUpload'">
                    <div
                            class="btn btn-primary btn-upload"
                            upload-button
                            url="http://127.0.0.1:8080/service/post-turtle-file"
                            on-success="parseResult(response)"
                    >Upload
                    </div>
                </div>
                <div ng-show="tab === 'progress'" class="progress">
                    <div class="progress-bar progress-bar-striped active"
                         role="progressbar"
                         aria-valuenow="100"
                         aria-valuemin="0"
                         aria-valuemax="100"
                         style="width: 100%">
                        <span class="sr-only">45% Complete</span>
                    </div>
                </div>
                <div ng-show="tab === 'result'">
                    <div ng-repeat="entry in errorArray">
                        original text: "{{entry['@graph'][0]['nif:isString']}}"
                        <h4><span class="label label-danger">Errors found: {{entry['@graph'].length-1}}</span></h4>
                        <div class="container">
                            <div class="table-responsive" style="width:80%">
                                <table class="table table-striped">
                                    <thead>
                                    <tr>
                                        <th>String</th>
                                        <th>Error</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr ng-repeat="error in entry['@graph']">
                                        <td>
                                            {{error["nif:anchorOf"]}}
                                        </td>
                                        <td>
                                            {{errorString(error['hasErrorType'])}}
                                            <!--Hier soll die Methode aufgerufen werden und das Ergebnis angezeigt werden-->
                                            <!--<button id="errorBtn" class="btn btn-default" onclick='errorString(error['hasErrorType'])'>Show Discription</button>
<!--
                                            Gedacht hatte ich so: Aber das geht nicht!
                                            errorString({{error["hasErrorType"]}})
-->
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
</body>
</html>